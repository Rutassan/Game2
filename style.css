:root {
  --cell: 32px;
  --gap: 3px;
  --bg: #0f1220;
  --panel: #171a2a;
  --grid: #242842;
  --text: #e6e8ef;
  --muted: #9aa3b2;
  --red: #e74c3c;
  --blue: #3498db;
  --red-cap: #ff6b5a;
  --blue-cap: #59b4f0;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji";
  background: linear-gradient(180deg, #0b0e1a, var(--bg) 30%);
  color: var(--text);
}

.top {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 12px;
  align-items: center;
  padding: 12px 16px;
  background: var(--panel);
  border-bottom: 1px solid #1f2440;
}

.top h1 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

.controls { display: flex; align-items: center; gap: 8px; }
.controls button {
  background: #273059;
  color: var(--text);
  border: 1px solid #2f3968;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
}
.controls button:hover { background: #2b3561; }
.controls .speed { margin-left: 8px; color: var(--muted); font-size: 12px; display: flex; align-items: center; gap: 6px; }

.stats { display: flex; gap: 16px; justify-content: flex-end; }
.stats span { color: var(--muted); font-size: 12px; }

.main { display: grid; grid-template-columns: auto 1fr; align-items: start; gap: 16px; padding: 16px; }
.board-wrap { background: var(--panel); border: 1px solid #1f2440; padding: 12px; border-radius: 10px; }
.board {
  display: grid;
  grid-template-columns: repeat(var(--size), var(--cell));
  grid-auto-rows: var(--cell);
  gap: var(--gap);
  background: #111429;
  padding: var(--gap);
  border-radius: 8px;
}
.cell {
  width: var(--cell);
  height: var(--cell);
  background: var(--grid);
  border-radius: 6px;
  position: relative;
  outline: 1px solid rgba(255,255,255,0.02);
}
.cell.capital.red { background: linear-gradient(135deg, #3a1e1c, #551f1a); border: 1px solid #6e2f25; }
.cell.capital.blue { background: linear-gradient(135deg, #1a2840, #0e2a45); border: 1px solid #214569; }
.cap-mark {
  position: absolute; inset: 0; display: grid; place-items: center;
  font-weight: 800; font-size: 14px; color: #fff; opacity: 0.9; text-shadow: 0 1px 2px rgba(0,0,0,.5);
}

.unit-dot {
  position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
  width: 70%; height: 70%; border-radius: 50%;
  box-shadow: inset 0 0 8px rgba(0,0,0,0.5), 0 1px 2px rgba(0,0,0,0.5);
}
.unit-dot.red { background: radial-gradient(circle at 30% 30%, #ff9286, var(--red)); }
.unit-dot.blue { background: radial-gradient(circle at 30% 30%, #9fd7ff, var(--blue)); }

.stack-count {
  position: absolute; right: 3px; bottom: 2px;
  font-size: 10px; font-weight: 700; color: #fff;
  padding: 1px 4px; border-radius: 6px;
  background: rgba(0,0,0,0.35);
}
.stack-count.red { border: 1px solid #ffb1a8; }
.stack-count.blue { border: 1px solid #bfe4ff; }

.log-wrap { background: var(--panel); border: 1px solid #1f2440; padding: 12px; border-radius: 10px; height: calc(100vh - 180px); overflow: hidden; display: flex; flex-direction: column; }
.log-wrap h2 { margin: 0 0 8px; font-size: 14px; color: var(--muted); font-weight: 600; }
.log { flex: 1 1 auto; overflow: auto; background: #0d1021; border: 1px solid #1f2440; border-radius: 8px; padding: 10px; font-size: 12px; }
.log p { margin: 0 0 6px; color: #cfd4df; }
.log .muted { color: var(--muted); }
.win { color: #fff; font-weight: 800; }

.foot { padding: 8px 16px; color: var(--muted); font-size: 12px; }

/* Battle highlight */
.cell.fight {
  outline: 2px solid #ffd166;
  box-shadow: 0 0 8px rgba(255, 209, 102, 0.7) inset;
}

/* Settings panel small tweaks */
.controls .group { display: inline-flex; align-items: center; gap: 6px; margin-left: 8px; }
.controls label { color: var(--muted); font-size: 12px; }
.controls input[type=range] { vertical-align: middle; }
.controls select { background: #273059; color: var(--text); border: 1px solid #2f3968; padding: 4px 6px; border-radius: 6px; }
